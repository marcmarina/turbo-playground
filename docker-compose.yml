services:
  # External-facing service with published port
  express-app:
    image: marcmarina/turbo-playground:latest
    command: node apps/express-app
    networks:
      - traefik
    env_file:
      - apps/express-app/.env
    deploy:
      replicas: 3
      update_config:
        delay: 5s
        parallelism: 1
        order: start-first

networks:
  traefik:
    external: true
